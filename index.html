<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Weather Forecast</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-dark-start: #0a0a0a;
    --bg-dark-end: #000000;
    --card-bg: rgba(20, 20, 20, 0.7);
    --card-bg-hover: rgba(30, 30, 30, 0.85);
    --accent-orange: #ff8c00;
    --text-color: #e0e0e0;
    --text-light: #ffffff;
    --border-color: rgba(255, 140, 0, 0.15);
    --border-color-hover: rgba(255, 140, 0, 0.4);

    /* Severity Colors */
    --severity-low: #39d353;
    --severity-medium: #ffc107;
    --severity-high: #ff8c00;
    --severity-critical: #ff4500;

    /* Card Accent Colors */
    --accent-wind: #00bfff;
    --accent-flare: #ffc107;
    --accent-geomagnetic: #9c27b0;
    --accent-sunspot: #4caf50;
    --accent-density: #03a9f4;
    --accent-sep: #f44336;
  }

  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(-45deg, var(--bg-dark-start), var(--bg-dark-end));
    color: var(--text-color);
    padding: 1rem;
    min-height: 100vh;
  }

  header {
    text-align: center;
    padding: 2rem 1rem;
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(2rem, 5vw, 3.2rem);
    color: var(--text-light);
    font-weight: 700;
    letter-spacing: 3px;
  }

  .section-title {
    color: var(--text-light);
    text-align: center;
    width: 100%;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.8rem;
    font-weight: 400;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
  }

  .main-content-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    padding: 1rem;
    margin-bottom: 2rem;
  }

  .conditions-card {
    --active-accent-color: var(--border-color);
    background-color: var(--card-bg);
    background-image: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.05), transparent 60%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 16px;
    padding: 2rem 0;
    width: 100%;
    max-width: 1000px;
    border: 1px solid var(--border-color);
    border-top: 4px solid var(--active-accent-color);
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    transition: border-top-color 0.5s ease-in-out;
  }
  .conditions-card.accent-border-wind { --active-accent-color: var(--accent-wind); }
  .conditions-card.accent-border-geomagnetic { --active-accent-color: var(--accent-geomagnetic); }
  .conditions-card.accent-border-flare { --active-accent-color: var(--accent-flare); }
  .conditions-card.accent-border-sep { --active-accent-color: var(--accent-sep); }


  .conditions-carousel {
    position: relative;
  }

  .carousel-track-container {
    overflow: hidden;
  }

  .carousel-track {
    display: flex;
    transition: transform 0.5s ease-in-out;
  }

  .metric-slide {
    width: 100%;
    flex-shrink: 0;
    box-sizing: border-box;
    padding: 0 4rem;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .slide-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.5rem;
    color: var(--text-light);
    margin-top: 0;
    margin-bottom: 2rem;
    text-align: center;
  }
  
  .slide-metrics-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2.5rem;
    width: 100%;
    margin-bottom: 1.5rem;
    max-width: 800px;
  }

  .slide-metrics-grid.single-metric {
    grid-template-columns: 1fr;
    max-width: 300px;
  }

  .slide-metric-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    position: relative;
  }

  .slide-metric-item:not(:last-child)::after {
    content: '';
    position: absolute;
    right: -1.25rem; /* half of gap */
    top: 15%;
    height: 70%;
    width: 1px;
    background-image: linear-gradient(to bottom, transparent, var(--border-color), transparent);
  }

  .card-icon {
    margin-bottom: 1rem;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(255,255,255,0.03);
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.1);
  }
  .card-icon svg {
    width: 32px;
    height: 32px;
    stroke-width: 1.5;
  }

  .slide-metric-item h3 {
    margin: 0 0 0.5rem 0;
    font-weight: 600;
    color: var(--text-light);
    font-size: 1.1rem;
    white-space: nowrap;
  }
  
  .slide-metric-item p.main-metric {
    margin: 0.5rem 0;
    font-size: 2.8rem;
    font-weight: 700;
    font-family: 'Orbitron', sans-serif;
    line-height: 1.2;
  }
  
  .slide-metric-item p.main-metric span {
    font-size: 1.2rem;
    color: var(--text-color);
    font-family: 'Poppins', sans-serif;
  }

  .slide-metric-item .sub-metric {
    font-size: 0.95rem;
    color: var(--text-color);
  }
  
  .slide-description {
    text-align: center;
    max-width: 600px;
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-color);
    min-height: 40px;
  }

  /* Specific larger text for Geomagnetic Activity slide */
  .metric-slide[data-accent="geomagnetic"] .main-metric {
    font-size: 4.5rem;
  }
  .metric-slide[data-accent="geomagnetic"] .sub-metric {
    font-size: 1.2rem;
  }
  .metric-slide[data-accent="geomagnetic"] .slide-description {
    font-size: 1.1rem;
  }

  .carousel-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease, border-color 0.3s ease;
    z-index: 10;
  }
  
  .carousel-button:hover {
    background: var(--card-bg-hover);
    border-color: var(--border-color-hover);
  }

  .carousel-button.prev { left: 1rem; }
  .carousel-button.next { right: 1rem; }
  
  .carousel-button svg { width: 22px; height: 22px; }

  .carousel-nav {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 1rem;
  }

  .carousel-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--border-color);
    border: none;
    cursor: pointer;
    padding: 0;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .carousel-dot.active {
    background: var(--accent-orange);
    transform: scale(1.2);
  }

  /* Metric Accent Colors */
  .metric-wind .main-metric, .metric-wind .card-icon { color: var(--accent-wind); }
  .metric-flare .main-metric, .metric-flare .card-icon { color: var(--accent-flare); }
  .metric-geomagnetic .main-metric, .metric-geomagnetic .card-icon { color: var(--accent-geomagnetic); }
  .metric-sunspot .main-metric, .metric-sunspot .card-icon { color: var(--accent-sunspot); }
  .metric-density .main-metric, .metric-density .card-icon { color: var(--accent-density); }
  .metric-sep .main-metric, .metric-sep .card-icon { color: var(--accent-sep); }
  
  .forecast-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: center;
    max-width: 1100px;
    margin: 0 auto 3rem auto;
  }
  
  .forecast-card {
    --glow-color: transparent;
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 12px;
    padding: 1.5rem;
    flex: 1 1 110px;
    max-width: 130px;
    text-align: center;
    border: 1px solid;
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
  }
  
  .forecast-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 20px -2px var(--glow-color);
    background: var(--card-bg-hover);
  }

  .forecast-card.quiet { border-color: var(--severity-low); --glow-color: var(--severity-low); }
  .forecast-card.unsettled { border-color: var(--severity-medium); --glow-color: var(--severity-medium); }
  .forecast-card.g1-storm { border-color: var(--severity-high); --glow-color: var(--severity-high); }
  .forecast-card.g2-storm { border-color: var(--severity-critical); --glow-color: var(--severity-critical); }

  .forecast-card .day { font-weight: 600; display: block; margin-bottom: 0.75rem; color: var(--text-light); font-size: 1.1rem; }
  .forecast-card .icon { width: 40px; height: 40px; margin: 0.75rem auto; color: var(--text-color); }
  .forecast-card .value { font-size: 1em; font-weight: 300; margin-top: 0.75rem; }
  .forecast-card .wind-speed { 
    font-size: 0.9em; 
    font-weight: 300;
    color: var(--accent-wind);
    margin-top: 0.75rem;
  }

  /* Recent Flares Section */
  .recent-flares-section {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto 3rem auto;
  }
  
  .flares-timeline {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
    padding: 1rem;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-orange) var(--bg-dark-start);
  }

  .flares-timeline::-webkit-scrollbar {
    height: 8px;
  }

  .flares-timeline::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.5);
    border-radius: 4px;
  }

  .flares-timeline::-webkit-scrollbar-thumb {
    background-color: var(--accent-orange);
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
  }

  .flare-card {
    backdrop-filter: blur(5px);
    border-radius: 10px;
    padding: 1.25rem;
    min-width: 150px;
    text-align: center;
    transition: background-color 0.3s ease;
    border: 1px solid var(--border-color);
    border-left-width: 5px;
  }
  
  .flare-card:hover {
    background-color: var(--card-bg-hover);
  }
  
  .flare-card .flare-class {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }
  
  .flare-card .flare-time {
    font-size: 1rem;
    color: var(--text-color);
  }
  
  .flare-card.c-class { 
    border-left-color: var(--severity-medium); 
    background: linear-gradient(90deg, hsla(45, 100%, 51%, 0.1), transparent 80%);
  }
  .flare-card.c-class .flare-class { color: var(--severity-medium); }
  
  .flare-card.m-class { 
    border-left-color: var(--severity-high); 
    background: linear-gradient(90deg, hsla(33, 100%, 50%, 0.1), transparent 80%);
  }
  .flare-card.m-class .flare-class { color: var(--severity-high); }
  
  .flare-card.x-class { 
    border-left-color: var(--severity-critical); 
    background: linear-gradient(90deg, hsla(16, 100%, 50%, 0.1), transparent 80%);
  }
  .flare-card.x-class .flare-class { color: var(--severity-critical); }

  /* CME Detections Section */
  .cme-section {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto 3rem auto;
  }

  .cme-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
    gap: 1.5rem;
  }

  .cme-card {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 16px;
    border: 1px solid var(--border-color);
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    transition: transform 0.3s ease, border-color 0.3s ease;
  }

  .cme-card:hover {
    transform: translateY(-5px);
    border-color: var(--border-color-hover);
  }

  .cme-header {
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 1.5rem;
  }

  .cme-icon svg {
    width: 48px;
    height: 48px;
  }

  .cme-time-speed {
    line-height: 1.4;
  }

  .cme-date {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--accent-orange);
    margin: 0;
  }

  .cme-speed {
    font-size: 1rem;
    color: var(--text-light);
    margin: 0;
  }

  .cme-severity {
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
  }

  .cme-card.minor .cme-severity { background-color: var(--severity-low); color: var(--bg-dark-end); }
  .cme-card.moderate .cme-severity { background-color: var(--severity-medium); color: var(--bg-dark-end); }
  .cme-card.strong .cme-severity { background-color: var(--severity-critical); color: var(--text-light); }

  .cme-details {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    border-top: 1px solid var(--border-color);
    padding-top: 1.5rem;
  }

  .cme-detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1rem;
  }

  .cme-label {
    color: var(--text-color);
    font-weight: 300;
  }

  .cme-value {
    color: var(--text-light);
    font-weight: 600;
    color: var(--accent-orange);
  }

  .charts-container {
    max-width: 1000px;
    width: 100%;
    margin: 2rem auto;
    padding: 2rem;
    border-radius: 16px;
    background: var(--card-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--border-color);
    box-sizing: border-box;
  }
  
  .chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .chart-header .section-title {
    margin: 0;
    text-align: left;
    width: auto;
    justify-content: flex-start;
  }

  .chart-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
    margin: 0;
  }

  .chart-buttons button {
    padding: 0.7rem 1.5rem;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    cursor: pointer;
    font-weight: 600;
    font-family: 'Poppins', sans-serif;
    background-color: transparent;
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .chart-buttons button:hover,
  .chart-buttons button.active {
    background-color: var(--accent-orange);
    color: var(--bg-dark-end);
    border-color: var(--accent-orange);
  }

  canvas {
    width: 100% !important;
    height: auto !important;
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-in-out, opacity 0.3s ease-in-out;
  }

  canvas.active {
    max-height: 400px;
    opacity: 1;
  }

</style>
</head>
<body>

<header>Space Weather Forecast</header>

<div class="main-content-container">
  <div class="conditions-card">
    <h3 class="section-title" style="margin-bottom: 2rem;">Current Conditions</h3>
    <div class="conditions-carousel">
      <div class="carousel-track-container">
          <div class="carousel-track">
              <div class="metric-slide" data-accent="wind">
                  <h4 class="slide-title">Solar Wind & IMF</h4>
                  <div class="slide-metrics-grid">
                      <div class="slide-metric-item metric-wind">
                          <div class="card-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path></svg></div>
                          <h3>Speed</h3>
                          <p class="main-metric">450 <span>km/s</span></p>
                      </div>
                      <div class="slide-metric-item metric-density">
                          <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg></div>
                          <h3>Density</h3>
                          <p class="main-metric">5.2 <span>p/cm³</span></p>
                      </div>
                      <div class="slide-metric-item metric-geomagnetic">
                           <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></div>
                          <h3>IMF Bz</h3>
                          <p class="main-metric">-4.5 <span>nT</span></p>
                      </div>
                  </div>
                  <p class="slide-description">A high-speed stream is currently active. The southward orientation of the IMF (Bz) may trigger geomagnetic activity.</p>
              </div>
              <div class="metric-slide" data-accent="geomagnetic">
                  <h4 class="slide-title">Geomagnetic Activity</h4>
                  <div class="slide-metrics-grid single-metric">
                      <div class="slide-metric-item metric-geomagnetic">
                          <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8.11 2.99"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg></div>
                          <h3>Kp Index</h3>
                          <p class="main-metric">4</p>
                          <p class="sub-metric">G1 (Minor) Storm</p>
                      </div>
                  </div>
                  <p class="slide-description">Minor geomagnetic storming in progress. Possible impacts include weak power grid fluctuations and minor impact on satellite operations. Aurora may be visible at high latitudes.</p>
              </div>
              <div class="metric-slide" data-accent="flare">
                  <h4 class="slide-title">Solar Activity</h4>
                  <div class="slide-metrics-grid">
                      <div class="slide-metric-item metric-flare">
                          <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></div>
                          <h3>Largest Flare (24h)</h3>
                          <p class="main-metric">M1.2</p>
                      </div>
                      <div class="slide-metric-item metric-sunspot">
                          <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg></div>
                          <h3>Sunspot Count</h3>
                          <p class="main-metric">78</p>
                      </div>
                      <div class="slide-metric-item metric-flare">
                          <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path></svg></div>
                          <h3>M-Flare Prob.</h3>
                          <p class="main-metric">55<span>%</span></p>
                      </div>
                  </div>
                  <p class="slide-description">Active region AR3664 remains the primary source of flare activity. Further M-class flares are likely.</p>
              </div>
               <div class="metric-slide" data-accent="sep">
                  <h4 class="slide-title">Radiation Environment</h4>
                  <div class="slide-metrics-grid single-metric">
                      <div class="slide-metric-item metric-sep">
                          <div class="card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></div>
                          <h3>SEP Radiation</h3>
                          <p class="main-metric">S1 <span>(Minor)</span></p>
                          <p class="sub-metric">15% Risk</p>
                      </div>
                  </div>
                  <p class="slide-description">Minor risk of Solar Energetic Particle (SEP) events. Potential for minor impacts on sensitive satellite electronics and HF radio propagation at polar regions.</p>
              </div>
          </div>
      </div>
      <button class="carousel-button prev" aria-label="Previous Metric"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
      <button class="carousel-button next" aria-label="Next Metric"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></button>
      <div class="carousel-nav"></div>
    </div>
  </div>
</div>

<div class="forecast-section">
    <h3 class="section-title">7-Day Geomagnetic Forecast</h3>
    <div class="forecast-container">
      <div class="forecast-card quiet"><span class="day">Mon</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span class="value">Quiet</span><span class="wind-speed">350 km/s</span></div>
      <div class="forecast-card quiet"><span class="day">Tue</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span class="value">Quiet</span><span class="wind-speed">380 km/s</span></div>
      <div class="forecast-card unsettled"><span class="day">Wed</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><span class="value">Unsettled</span><span class="wind-speed">450 km/s</span></div>
      <div class="forecast-card g1-storm"><span class="day">Thu</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><span class="value">G1 Storm</span><span class="wind-speed">550 km/s</span></div>
      <div class="forecast-card g2-storm"><span class="day">Fri</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><span class="value">G2 Storm</span><span class="wind-speed">650 km/s</span></div>
      <div class="forecast-card unsettled"><span class="day">Sat</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><span class="value">Unsettled</span><span class="wind-speed">500 km/s</span></div>
      <div class="forecast-card quiet"><span class="day">Sun</span><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span class="value">Quiet</span><span class="wind-speed">420 km/s</span></div>
    </div>
</div>

<div class="recent-flares-section">
    <h3 class="section-title">Recent Solar Flares (Last 5 Hours)</h3>
    <div class="flares-timeline">
      <div class="flare-card x-class">
        <p class="flare-class">X1.5</p>
        <p class="flare-time">02:33 UTC</p>
      </div>
      <div class="flare-card m-class">
        <p class="flare-class">M2.1</p>
        <p class="flare-time">01:58 UTC</p>
      </div>
      <div class="flare-card m-class">
        <p class="flare-class">M1.0</p>
        <p class="flare-time">00:15 UTC</p>
      </div>
      <div class="flare-card c-class">
        <p class="flare-class">C8.9</p>
        <p class="flare-time">23:45 UTC</p>
      </div>
       <div class="flare-card c-class">
        <p class="flare-class">C5.4</p>
        <p class="flare-time">22:05 UTC</p>
      </div>
    </div>
</div>

<div class="cme-section">
  <h3 class="section-title">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 17l5-5-5-5M6 17l5-5-5-5"/></svg>
    Recent CME Detections
  </h3>
  <div class="cme-grid">
    <div class="cme-card moderate">
      <div class="cme-header">
        <div class="cme-icon" style="color: var(--severity-medium)">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1-2-4-1-4 2 .5 2.5 2.5 2.5 2.5 3.5zM14.5 14.5A2.5 2.5 0 0017 12c0-1.38-.5-2-1-3-1-2-4-1-4 2 .5 2.5 2.5 2.5 2.5 3.5z"/><path d="M2 20h20"/><path d="M17 19v-5H7v5h10z"/></svg>
        </div>
        <div class="cme-time-speed">
          <p class="cme-date">2025-10-01 16:18 UTC</p>
          <p class="cme-speed">Speed: 551 km/s</p>
        </div>
        <div class="cme-severity">Moderate</div>
      </div>
      <div class="cme-details">
        <div class="cme-detail-item">
          <span class="cme-label">Direction:</span>
          <span class="cme-value">Earth-directed</span>
        </div>
        <div class="cme-detail-item">
          <span class="cme-label">Est. Arrival:</span>
          <span class="cme-value">2025-10-04 12:31 UTC</span>
        </div>
      </div>
    </div>
    <div class="cme-card minor">
      <div class="cme-header">
        <div class="cme-icon" style="color: var(--severity-low)">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        </div>
        <div class="cme-time-speed">
          <p class="cme-date">2025-09-30 17:12 UTC</p>
          <p class="cme-speed">Speed: 499 km/s</p>
        </div>
        <div class="cme-severity">Minor</div>
      </div>
      <div class="cme-details">
        <div class="cme-detail-item">
          <span class="cme-label">Direction:</span>
          <span class="cme-value">Glancing blow</span>
        </div>
        <div class="cme-detail-item">
          <span class="cme-label">Est. Arrival:</span>
          <span class="cme-value">2025-10-02 06:58 UTC</span>
        </div>
      </div>
    </div>
    <div class="cme-card strong">
      <div class="cme-header">
        <div class="cme-icon" style="color: var(--severity-critical)">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1-2-4-1-4 2 .5 2.5 2.5 2.5 2.5 3.5z"/><path d="M14.5 14.5A2.5 2.5 0 0017 12c0-1.38-.5-2-1-3-1-2-4-1-4 2 .5 2.5 2.5 2.5 2.5 3.5z"/><path d="M2 20h20"/><path d="M17 19v-5H7v5h10z"/></svg>
        </div>
        <div class="cme-time-speed">
          <p class="cme-date">2025-09-29 21:53 UTC</p>
          <p class="cme-speed">Speed: 850 km/s</p>
        </div>
        <div class="cme-severity">Strong</div>
      </div>
      <div class="cme-details">
        <div class="cme-detail-item">
          <span class="cme-label">Direction:</span>
          <span class="cme-value">Earth-directed</span>
        </div>
        <div class="cme-detail-item">
          <span class="cme-label">Est. Arrival:</span>
          <span class="cme-value">2025-10-01 19:04 UTC</span>
        </div>
      </div>
    </div>
     <div class="cme-card strong">
      <div class="cme-header">
        <div class="cme-icon" style="color: var(--severity-critical)">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1-2-4-1-4 2 .5 2.5 2.5 2.5 2.5 3.5z"/><path d="M14.5 14.5A2.5 2.5 0 0017 12c0-1.38-.5-2-1-3-1-2-4-1-4 2 .5 2.5 2.5 2.5 2.5 3.5z"/><path d="M2 20h20"/><path d="M17 19v-5H7v5h10z"/></svg>
        </div>
        <div class="cme-time-speed">
          <p class="cme-date">2025-09-28 16:53 UTC</p>
          <p class="cme-speed">Speed: 716 km/s</p>
        </div>
        <div class="cme-severity">Strong</div>
      </div>
      <div class="cme-details">
        <div class="cme-detail-item">
          <span class="cme-label">Direction:</span>
          <span class="cme-value">Earth-directed</span>
        </div>
        <div class="cme-detail-item">
          <span class="cme-label">Est. Arrival:</span>
          <span class="cme-value">2025-10-01 10:33 UTC</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="charts-container">
  <div class="chart-header">
    <h3 class="section-title">Data Visualizations (48 Hour Period)</h3>
    <div class="chart-buttons">
      <button onclick="showChart('kpChart', this)" class="active">KP Index</button>
      <button onclick="showChart('solarWindChart', this)">Solar Wind</button>
      <button onclick="showChart('densityChart', this)">Wind Density</button>
      <button onclick="showChart('imfChart', this)">IMF Bz</button>
      <button onclick="showChart('flareChart', this)">Solar Flares</button>
    </div>
  </div>
  <canvas id="kpChart" class="active"></canvas>
  <canvas id="solarWindChart"></canvas>
  <canvas id="densityChart"></canvas>
  <canvas id="imfChart"></canvas>
  <canvas id="flareChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // --- Carousel Logic ---
  document.addEventListener('DOMContentLoaded', () => {
    const conditionsCard = document.querySelector('.conditions-card');
    const track = document.querySelector('.carousel-track');
    if (!track || !conditionsCard) return;
    
    const slides = Array.from(track.children);
    const nextButton = document.querySelector('.carousel-button.next');
    const prevButton = document.querySelector('.carousel-button.prev');
    const dotsNav = document.querySelector('.carousel-nav');

    if (slides.length > 0) {
      slides.forEach((_, index) => {
        const button = document.createElement('button');
        button.classList.add('carousel-dot');
        button.setAttribute('aria-label', `Go to slide ${index + 1}`);
        if (index === 0) button.classList.add('active');
        dotsNav.appendChild(button);
      });

      const dots = Array.from(dotsNav.children);
      let currentSlideIndex = 0;
      
      const accentClasses = ['accent-border-wind', 'accent-border-geomagnetic', 'accent-border-flare', 'accent-border-sep'];

      const updateCarousel = (targetIndex) => {
        if (targetIndex < 0 || targetIndex >= slides.length) return;

        track.style.transform = `translateX(-${targetIndex * 100}%)`;
        
        // Update dots
        if (dots.length > 0) {
          dots[currentSlideIndex].classList.remove('active');
          dots[targetIndex].classList.add('active');
        }
        
        // Update buttons
        prevButton.style.display = targetIndex === 0 ? 'none' : 'flex';
        nextButton.style.display = targetIndex === slides.length - 1 ? 'none' : 'flex';

        // Update card border color
        conditionsCard.classList.remove(...accentClasses);
        const newAccentClass = slides[targetIndex].dataset.accent;
        if (newAccentClass) {
          conditionsCard.classList.add(`accent-border-${newAccentClass}`);
        }

        currentSlideIndex = targetIndex;
      };

      prevButton.addEventListener('click', () => updateCarousel(currentSlideIndex - 1));
      nextButton.addEventListener('click', () => updateCarousel(currentSlideIndex + 1));
      dotsNav.addEventListener('click', e => {
        const targetDot = e.target.closest('button.carousel-dot');
        if (!targetDot) return;
        const targetIndex = dots.findIndex(dot => dot === targetDot);
        updateCarousel(targetIndex);
      });

      updateCarousel(0);
    }
  });


  // --- Chart Logic (global for onclick) ---
  const chartInstances = {};

  function showChart(id, buttonEl) {
    // Hide all charts and remove active class from all buttons
    document.querySelectorAll('.charts-container canvas').forEach(c => c.classList.remove('active'));
    document.querySelectorAll('.chart-buttons button').forEach(b => b.classList.remove('active'));

    // Show the selected chart and set its button to active
    document.getElementById(id).classList.add('active');
    buttonEl.classList.add('active');

    // If the chart hasn't been created yet, create it
    if (!chartInstances[id]) {
      createChart(id);
    }
  }

  const chartFont = { family: "'Poppins', sans-serif" };
  const rootStyles = getComputedStyle(document.documentElement);
  const commonOptions = {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { labels: { color: rootStyles.getPropertyValue('--text-color'), font: chartFont } },
      tooltip: { 
        enabled: true, 
        backgroundColor: 'rgba(10, 10, 10, 0.8)',
        titleFont: { ...chartFont, size: 14 },
        bodyFont: { ...chartFont, size: 12 },
        padding: 10,
        cornerRadius: 8,
        borderColor: 'rgba(255, 140, 0, 0.5)',
        borderWidth: 1
      }
    },
    scales: {
      x: { 
        ticks: { color: rootStyles.getPropertyValue('--text-color'), font: chartFont, maxRotation: 45, minRotation: 45 }, 
        grid: { color: rootStyles.getPropertyValue('--border-color') } 
      },
      y: { 
        ticks: { color: rootStyles.getPropertyValue('--text-color'), font: chartFont }, 
        grid: { color: rootStyles.getPropertyValue('--border-color') }, 
        beginAtZero: true 
      }
    }
  };

  const chartLabels = Array.from({length: 24}, (_, i) => `${String(i*2).padStart(2, '0')}:00`);

  function createChart(id) {
    const ctx = document.getElementById(id).getContext('2d');
    
    const kpJumps = [1, 1, 1, 2, 2, 3, 4, 5, 6, 6, 5, 4, 3, 3, 2, 2, 2, 1, 1, 1, 2, 3, 3, 2];
    const windSpike = [350, 360, 355, 370, 400, 450, 580, 650, 640, 630, 600, 550, 520, 510, 500, 480, 470, 450, 440, 430, 450, 480, 470, 460];
    const densitySpike = [5, 5, 6, 7, 8, 15, 25, 12, 8, 7, 6, 6, 5, 5, 5, 6, 7, 7, 8, 9, 10, 8, 7, 6];
    const imfDip = [4, 5, 3, 2, 1, -2, -8, -12, -10, -9, -5, -2, 1, 3, 4, 3, 2, 1, 0, -1, -3, -2, 1, 3];
    const flareProb = [5, 5, 10, 10, 15, 15, 20, 40, 45, 55, 50, 40, 30, 25, 20, 15, 15, 10, 10, 15, 20, 25, 20, 15];

    let chartConfig;

    switch (id) {
      case 'kpChart':
        chartConfig = {
          type: 'bar',
          data: { 
            labels: chartLabels, 
            datasets: [{ 
              label: 'Observed Kp Index', 
              data: kpJumps, 
              backgroundColor: (context) => {
                const value = context.raw;
                if (value >= 6) return rootStyles.getPropertyValue('--severity-critical');
                if (value >= 5) return rootStyles.getPropertyValue('--severity-high');
                if (value >= 4) return rootStyles.getPropertyValue('--severity-medium');
                return rootStyles.getPropertyValue('--severity-low');
              },
              borderRadius: 4,
              barPercentage: 0.8,
              categoryPercentage: 0.9,
            }] 
          },
          options: { ...commonOptions, scales: { ...commonOptions.scales, y: { ...commonOptions.scales.y, max: 9 } } }
        };
        break;
      
      case 'solarWindChart':
        const solarWindGradient = ctx.createLinearGradient(0, 0, 0, 300);
        solarWindGradient.addColorStop(0, 'rgba(0, 191, 255, 0.6)');
        solarWindGradient.addColorStop(1, 'rgba(0, 191, 255, 0.0)');
        chartConfig = {
          type: 'line',
          data: { 
            labels: chartLabels, 
            datasets: [{ 
              label: 'Solar Wind Speed (km/s)', 
              data: windSpike, 
              borderColor: rootStyles.getPropertyValue('--accent-wind'), 
              backgroundColor: solarWindGradient, 
              fill: true, 
              tension: 0.4, 
              pointBackgroundColor: rootStyles.getPropertyValue('--accent-wind'), 
              pointRadius: 2,
              borderWidth: 2
            }] 
          },
          options: commonOptions
        };
        break;

      case 'densityChart':
        const densityGradient = ctx.createLinearGradient(0, 0, 0, 300);
        densityGradient.addColorStop(0, 'rgba(3, 169, 244, 0.6)');
        densityGradient.addColorStop(1, 'rgba(3, 169, 244, 0.0)');
        chartConfig = {
          type: 'line',
          data: { 
            labels: chartLabels, 
            datasets: [{ 
              label: 'Solar Wind Density (p/cm³)', 
              data: densitySpike, 
              borderColor: rootStyles.getPropertyValue('--accent-density'), 
              backgroundColor: densityGradient, 
              fill: true, 
              tension: 0.4, 
              pointBackgroundColor: rootStyles.getPropertyValue('--accent-density'), 
              pointRadius: 2,
              borderWidth: 2
            }] 
          },
          options: commonOptions
        };
        break;

      case 'imfChart':
        const imfGradient = ctx.createLinearGradient(0, 0, 0, 300);
        imfGradient.addColorStop(0, 'rgba(156, 39, 176, 0.6)');
        imfGradient.addColorStop(1, 'rgba(156, 39, 176, 0.0)');
        chartConfig = {
          type: 'line',
          data: { 
            labels: chartLabels, 
            datasets: [{ 
              label: 'IMF Bz (nT)', 
              data: imfDip, 
              borderColor: rootStyles.getPropertyValue('--accent-geomagnetic'), 
              backgroundColor: imfGradient, 
              fill: true, 
              tension: 0.4, 
              pointBackgroundColor: rootStyles.getPropertyValue('--accent-geomagnetic'), 
              pointRadius: 2,
              borderWidth: 2
            }] 
          },
          options: { ...commonOptions, scales: { ...commonOptions.scales, y: { ...commonOptions.scales.y, beginAtZero: false } } }
        };
        break;

      case 'flareChart':
        chartConfig = {
          type: 'bar',
          data: { 
            labels: chartLabels, 
            datasets: [{ 
              label: 'M-Class Flare Probability (%)', 
              data: flareProb, 
              backgroundColor: rootStyles.getPropertyValue('--accent-flare'), 
              borderRadius: 4 
            }] 
          },
          options: { ...commonOptions, scales: { ...commonOptions.scales, y: { ...commonOptions.scales.y, max: 100 } } }
        };
        break;
    }
    
    if (chartConfig) {
      chartInstances[id] = new Chart(ctx, chartConfig);
    }
  }

  // Initialize the first chart on page load
  createChart('kpChart');
</script>

</body>
</html>
